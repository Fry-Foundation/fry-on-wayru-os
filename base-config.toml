[general]
os_name = "fry-iot"
os_version = "1.0.0"
os_codename = "trixie"
description = "Fry IoT - Debian 13 based Linux for routers and IoT devices"

[debian]
suite = "trixie"
mirror = "https://deb.debian.org/debian"
security_mirror = "https://deb.debian.org/debian-security"
components = ["main", "contrib", "non-free", "non-free-firmware"]

[debian.kernel]
# Default kernel - can be overridden per-profile for specific hardware
package = "linux-image-amd64"
# For ARM devices, use: linux-image-arm64 or linux-image-armmp

[fry]
# Fry Networks integration
api_endpoint = "https://api.fry.network"
bandwidth_mining = true
node_type = "router"

[[fry.services]]
name = "fry-node"
description = "Fry Network node daemon"
repository = "https://github.com/Fry-Foundation/fry-node.git"

[[fry.services]]
name = "bandwidth-miner"
description = "Bandwidth mining service for Fry Networks"
repository = "https://github.com/Fry-Foundation/bandwidth-miner.git"

[packages]
# Core system packages for all devices
core = [
    # Base system
    "systemd",
    "systemd-sysv",
    "dbus",
    "udev",

    # Networking essentials
    "iproute2",
    "iputils-ping",
    "netbase",
    "ifupdown2",
    "network-manager",
    "wpasupplicant",
    "hostapd",

    # Firewall
    "nftables",
    "iptables",

    # DNS/DHCP
    "dnsmasq",
    "systemd-resolved",

    # SSH
    "openssh-server",
    "openssh-client",

    # Utilities
    "sudo",
    "curl",
    "wget",
    "ca-certificates",
    "gnupg",
    "less",
    "vim-tiny",
    "nano",
    "htop",
    "procps",
    "lsof",
    "file",

    # Hardware support
    "usbutils",
    "pciutils",
    "lshw",

    # Compression
    "xz-utils",
    "zstd",
    "gzip",
    "bzip2",
]

# IoT and router-specific packages
iot = [
    # WiFi management
    "iw",
    "wireless-tools",
    "rfkill",

    # Bridge and VLAN support
    "bridge-utils",
    "vlan",

    # Performance monitoring
    "iotop",
    "iftop",
    "bmon",
    "vnstat",

    # Container support (optional, for advanced deployments)
    "podman",

    # Watchdog
    "watchdog",

    # Logging
    "rsyslog",
    "logrotate",

    # NTP
    "chrony",

    # mDNS/DNS-SD
    "avahi-daemon",

    # GPIO and hardware access (for IoT)
    "libgpiod2",
    "gpiod",

    # Python for scripting
    "python3",
    "python3-pip",
    "python3-venv",
]

# Fry Networks packages (installed from Fry repos)
fry = [
    "fry-node",
    "bandwidth-miner",
    "fry-cli",
    "fry-dashboard",
]

# Desktop packages (optional, for full desktop experience)
desktop = [
    "xfce4",
    "xfce4-goodies",
    "lightdm",
    "firefox-esr",
    "network-manager-gnome",
]

# Server packages (optional, for server deployments)
server = [
    "nginx",
    "postgresql",
    "redis-server",
    "docker.io",
    "docker-compose",
]

[build]
# Build configuration
output_dir = "output"
cache_dir = "cache"
work_dir = "work"

# Image formats to generate
formats = ["img", "tar.gz"]

# Compression for images
compression = "xz"

# Default image size (can be expanded on first boot)
image_size = "4G"

# Root filesystem type
rootfs_type = "ext4"
